<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµì§ì› ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // ì•„ì´ì½˜ì„ ìœ„í•œ ê°„ë‹¨í•œ SVG ì»´í¬ë„ŒíŠ¸ë“¤
        const Calculator = () => <span>ğŸ“Š</span>;
        const AlertCircle = () => <span>âš ï¸</span>;
        const CheckCircle = () => <span>âœ…</span>;
        const XCircle = () => <span>âŒ</span>;
        const FileText = () => <span>ğŸ“„</span>;
        const Download = () => <span>ğŸ’¾</span>;
        const UserPlus = () => <span>ğŸ‘¤</span>;
        const Info = () => <span>â„¹ï¸</span>;

        const RetirementBenefitSystem = () => {
          const [employees, setEmployees] = React.useState([]);
          const [formData, setFormData] = React.useState({
            name: '',
            employeeId: '',
            department: '',
            position: '',
            hireDate: '',
            retirementDate: '',
            birthDate: '',
            employeeType: 'professor',
            monthlyPay1: '',
            monthlyPay2: '',
            monthlyPay3: '',
            disqualifications: {
              underDisciplinary: false,
              disciplinaryPunishment: false,
              criminalCase: false,
              inappropriate: false
            }
          });

          const [calculation, setCalculation] = React.useState(null);
          const [errors, setErrors] = React.useState({});

          // ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜
          const formatDateInput = (value, fieldName) => {
            const numbers = value.replace(/[^0-9]/g, '');
            const limited = numbers.slice(0, 8);
            
            let formatted = limited;
            if (limited.length >= 4) {
              formatted = limited.slice(0, 4);
              if (limited.length >= 6) {
                formatted += '.' + limited.slice(4, 6);
                if (limited.length > 6) {
                  formatted += '.' + limited.slice(6, 8);
                }
              } else if (limited.length > 4) {
                formatted += '.' + limited.slice(4);
              }
            }
            
            setFormData({...formData, [fieldName]: formatted});
          };

          // ë‚ ì§œ íŒŒì‹±
          const parseDate = (dateStr) => {
            if (!dateStr) return null;
            const cleaned = dateStr.replace(/[^0-9]/g, '');
            if (cleaned.length !== 8) return null;
            
            const year = parseInt(cleaned.slice(0, 4));
            const month = parseInt(cleaned.slice(4, 6)) - 1;
            const day = parseInt(cleaned.slice(6, 8));
            
            return new Date(year, month, day);
          };

          // ê·¼ì†ì—°ìˆ˜ ê³„ì‚°
          const calculateServiceYears = (hireDate, retirementDate) => {
            const hire = parseDate(hireDate);
            const retire = parseDate(retirementDate);
            
            if (!hire || !retire) return null;
            
            let years = retire.getFullYear() - hire.getFullYear();
            let months = retire.getMonth() - hire.getMonth();
            let days = retire.getDate() - hire.getDate();
            
            if (days < 0) {
              months--;
              const lastDayOfPrevMonth = new Date(retire.getFullYear(), retire.getMonth(), 0).getDate();
              days = lastDayOfPrevMonth - hire.getDate() + retire.getDate();
            }
            
            if (months < 0) {
              years--;
              months += 12;
            }
            
            const totalMonths = years * 12 + months + (days >= 15 ? 1 : 0);
            
            return {
              years,
              months,
              days,
              totalMonths,
              display: `${years}ë…„ ${months}ì›” ${days}ì¼`
            };
          };

          // ì •ë…„í‡´ì§ì¼ ê³„ì‚°
          const calculateRetirementAge = (birthDate, employeeType) => {
            const birth = parseDate(birthDate);
            if (!birth) return null;
            
            const birthMonth = birth.getMonth() + 1;
            const retirementAge = employeeType === 'professor' ? 65 : 61;
            const retirementYear = birth.getFullYear() + retirementAge;
            
            if (birthMonth >= 3 && birthMonth <= 8) {
              return new Date(retirementYear, 7, 31);
            } else if (birthMonth >= 9) {
              const feb = new Date(retirementYear + 1, 2, 0);
              return feb;
            } else {
              const feb = new Date(retirementYear, 2, 0);
              return feb;
            }
          };

          // ì •ë…„ ì”ì—¬ê°œì›”ìˆ˜ ê³„ì‚°
          const calculateRemainingMonths = (retirementDate, regularRetirementDate) => {
            const retire = parseDate(retirementDate);
            const regular = regularRetirementDate;
            
            if (!retire || !regular) return null;
            
            if (regular < retire) {
              return {
                totalMonths: 0,
                years: 0,
                months: 0,
                days: 0,
                display: 'ì •ë…„ ì´ˆê³¼'
              };
            }
            
            let years = regular.getFullYear() - retire.getFullYear();
            let months = regular.getMonth() - retire.getMonth();
            let days = regular.getDate() - retire.getDate();
            
            if (days < 0) {
              months--;
              const lastDayOfPrevMonth = new Date(regular.getFullYear(), regular.getMonth(), 0).getDate();
              days = lastDayOfPrevMonth - retire.getDate() + regular.getDate();
            }
            
            if (months < 0) {
              years--;
              months += 12;
            }
            
            const totalMonths = years * 12 + months + (days >= 15 ? 1 : 0);
            
            return {
              totalMonths,
              years,
              months,
              days,
              display: `${years}ë…„ ${months}ì›” ${days}ì¼`
            };
          };

          // ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ê³„ì‚°
          const calculateBenefit = () => {
            setErrors({});
            const newErrors = {};

            if (!formData.name) newErrors.name = 'ì„±ëª…ì„ ì…ë ¥í•˜ì„¸ìš”';
            if (!formData.employeeId) newErrors.employeeId = 'êµë²ˆì„ ì…ë ¥í•˜ì„¸ìš”';
            if (!formData.hireDate || formData.hireDate.length < 10) newErrors.hireDate = 'ìµœì´ˆì„ìš©ì¼ì„ 8ìë¦¬ë¡œ ì…ë ¥í•˜ì„¸ìš”';
            if (!formData.retirementDate || formData.retirementDate.length < 10) newErrors.retirementDate = 'ëª…ì˜ˆí‡´ì§ì¼ì„ 8ìë¦¬ë¡œ ì…ë ¥í•˜ì„¸ìš”';
            if (!formData.birthDate || formData.birthDate.length < 10) newErrors.birthDate = 'ìƒë…„ì›”ì¼ì„ 8ìë¦¬ë¡œ ì…ë ¥í•˜ì„¸ìš”';
            if (!formData.monthlyPay1 || !formData.monthlyPay2 || !formData.monthlyPay3) {
              newErrors.monthlyPay = 'ìµœê·¼ 3ê°œì›” ë³´ìˆ˜ë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”';
            }

            if (Object.keys(newErrors).length > 0) {
              setErrors(newErrors);
              return;
            }

            const service = calculateServiceYears(formData.hireDate, formData.retirementDate);
            
            if (!service) {
              setErrors({date: 'ë‚ ì§œ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤'});
              return;
            }
            
            const isEligible = service.years >= 20;
            const disqualified = Object.values(formData.disqualifications).some(v => v);
            const regularRetirementDate = calculateRetirementAge(formData.birthDate, formData.employeeType);
            
            if (!regularRetirementDate) {
              setErrors({birthDate: 'ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤'});
              return;
            }
            
            const remaining = calculateRemainingMonths(formData.retirementDate, regularRetirementDate);
            
            const avgMonthlyPay = (
              parseFloat(formData.monthlyPay1) + 
              parseFloat(formData.monthlyPay2) + 
              parseFloat(formData.monthlyPay3)
            ) / 3;
            
            let benefit = 0;
            let benefitDetails = [];
            
            if (isEligible && !disqualified && remaining.totalMonths > 0) {
              if (remaining.totalMonths <= 60) {
                benefit = remaining.totalMonths * avgMonthlyPay * 0.6;
                benefitDetails.push({
                  period: '1~5ë…„',
                  months: remaining.totalMonths,
                  rate: 0.6,
                  amount: benefit
                });
              } else if (remaining.totalMonths <= 120) {
                const first5Years = 60 * avgMonthlyPay * 0.6;
                const remainingMonths = remaining.totalMonths - 60;
                const next5Years = remainingMonths * avgMonthlyPay * 0.3;
                
                benefit = first5Years + next5Years;
                benefitDetails.push({
                  period: '1~5ë…„',
                  months: 60,
                  rate: 0.6,
                  amount: first5Years
                });
                benefitDetails.push({
                  period: '5~10ë…„',
                  months: remainingMonths,
                  rate: 0.3,
                  amount: next5Years
                });
              }
            }
            
            setCalculation({
              isEligible,
              disqualified,
              service,
              regularRetirementDate,
              remaining,
              avgMonthlyPay,
              benefit,
              benefitDetails
            });
          };

          // ì§ì› ì¶”ê°€
          const addEmployee = () => {
            if (!calculation) {
              alert('ë¨¼ì € ê³„ì‚°ì„ ìˆ˜í–‰í•˜ì„¸ìš”');
              return;
            }
            
            const newEmployee = {
              id: Date.now(),
              ...formData,
              ...calculation,
              registeredAt: new Date().toLocaleString()
            };
            
            setEmployees([...employees, newEmployee]);
            
            setFormData({
              name: '',
              employeeId: '',
              department: '',
              position: '',
              hireDate: '',
              retirementDate: '',
              birthDate: '',
              employeeType: 'professor',
              monthlyPay1: '',
              monthlyPay2: '',
              monthlyPay3: '',
              disqualifications: {
                underDisciplinary: false,
                disciplinaryPunishment: false,
                criminalCase: false,
                inappropriate: false
              }
            });
            setCalculation(null);
          };

          // CSV ë‹¤ìš´ë¡œë“œ
          const downloadCSV = () => {
            const headers = ['ìˆœë²ˆ', 'ì†Œì†', 'ì§ë ¬', 'ì„±ëª…', 'êµë²ˆ', 'ìµœì´ˆì„ìš©ì¼', 'í‡´ì§ì¼', 'ê·¼ì†ê¸°ê°„', 'ì •ë…„í‡´ì§ì¼', 'ì •ë…„ì”ì—¬ê°œì›”ìˆ˜', 'í‰ê· ë³´ìˆ˜ì›”ì•¡', 'ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹', 'ë“±ë¡ì¼ì‹œ'];
            
            const rows = employees.map((emp, idx) => [
              idx + 1,
              emp.department,
              emp.position,
              emp.name,
              emp.employeeId,
              emp.hireDate,
              emp.retirementDate,
              emp.service.display,
              emp.regularRetirementDate.toLocaleDateString(),
              emp.remaining.totalMonths,
              emp.avgMonthlyPay.toLocaleString(),
              emp.benefit.toLocaleString(),
              emp.registeredAt
            ]);
            
            const csvContent = [headers, ...rows]
              .map(row => row.map(cell => `"${cell}"`).join(','))
              .join('\n');
            
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹_ê´€ë¦¬ëŒ€ì¥_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
          };

          return (
            <div className="max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen">
              <div className="mb-8">
                <h1 className="text-3xl font-bold text-gray-800 mb-2">êµì§ì› ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
                <p className="text-gray-600">ìš©ì¸ëŒ€í•™êµ êµì§ì› ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ì§€ê¸‰ ê·œì •ì— ë”°ë¥¸ ìë™ ê³„ì‚° ì‹œìŠ¤í…œ</p>
              </div>

              <div className="mb-4 bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
                <div className="flex items-start">
                  <Info />
                  <div className="ml-2 text-sm text-blue-700">
                    <p className="font-semibold mb-1">ë‚ ì§œ ì…ë ¥ ë°©ë²•</p>
                    <p>ë‚ ì§œëŠ” ìˆ«ì 8ìë¦¬ë¡œ ì…ë ¥í•˜ì„¸ìš”. (ì˜ˆ: 19960301 â†’ 1996.03.01ë¡œ ìë™ ë³€í™˜)</p>
                    <p>â€¢ êµì› ì •ë…„: ë§Œ 65ì„¸ê°€ ë˜ëŠ” ë‚ ì´ ì†í•˜ëŠ” í•™ê¸° ë§ì¼</p>
                    <p>â€¢ ì§ì› ì •ë…„: ë§Œ 61ì„¸ê°€ ë˜ëŠ” ë‚ ì´ ì†í•˜ëŠ” í•™ê¸° ë§ì¼</p>
                  </div>
                </div>
              </div>

              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div className="bg-white rounded-lg shadow-md p-6">
                  <h2 className="text-xl font-semibold mb-4 flex items-center">
                    <UserPlus />
                    <span className="ml-2">êµì§ì› ì •ë³´ ì…ë ¥</span>
                  </h2>
                  
                  <div className="space-y-4">
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium mb-1">ì„±ëª…*</label>
                        <input
                          type="text"
                          value={formData.name}
                          onChange={(e) => setFormData({...formData, name: e.target.value})}
                          className={`w-full px-3 py-2 border rounded-md ${errors.name ? 'border-red-500' : 'border-gray-300'}`}
                          placeholder="í™ê¸¸ë™"
                        />
                        {errors.name && <p className="text-red-500 text-xs mt-1">{errors.name}</p>}
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium mb-1">êµë²ˆ*</label>
                        <input
                          type="text"
                          value={formData.employeeId}
                          onChange={(e) => setFormData({...formData, employeeId: e.target.value})}
                          className={`w-full px-3 py-2 border rounded-md ${errors.employeeId ? 'border-red-500' : 'border-gray-300'}`}
                          placeholder="123456"
                        />
                        {errors.employeeId && <p className="text-red-500 text-xs mt-1">{errors.employeeId}</p>}
                      </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium mb-1">ì†Œì†</label>
                        <input
                          type="text"
                          value={formData.department}
                          onChange={(e) => setFormData({...formData, department: e.target.value})}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md"
                          placeholder="ê²½ì˜í•™ê³¼"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium mb-1">ì§ë ¬</label>
                        <input
                          type="text"
                          value={formData.position}
                          onChange={(e) => setFormData({...formData, position: e.target.value})}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md"
                          placeholder="êµìˆ˜"
                        />
                      </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium mb-1">ìµœì´ˆì„ìš©ì¼* (8ìë¦¬)</label>
                        <input
                          type="text"
                          value={formData.hireDate}
                          onChange={(e) => formatDateInput(e.target.value, 'hireDate')}
                          className={`w-full px-3 py-2 border rounded-md ${errors.hireDate ? 'border-red-500' : 'border-gray-300'}`}
                          placeholder="1996.03.01"
                          maxLength="10"
                        />
                        {errors.hireDate && <p className="text-red-500 text-xs mt-1">{errors.hireDate}</p>}
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium mb-1">ëª…ì˜ˆí‡´ì§ì¼* (8ìë¦¬)</label>
                        <input
                          type="text"
                          value={formData.retirementDate}
                          onChange={(e) => formatDateInput(e.target.value, 'retirementDate')}
                          className={`w-full px-3 py-2 border rounded-md ${errors.retirementDate ? 'border-red-500' : 'border-gray-300'}`}
                          placeholder="2025.08.31"
                          maxLength="10"
                        />
                        {errors.retirementDate && <p className="text-red-500 text-xs mt-1">{errors.retirementDate}</p>}
                      </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium mb-1">ìƒë…„ì›”ì¼* (8ìë¦¬)</label>
                        <input
                          type="text"
                          value={formData.birthDate}
                          onChange={(e) => formatDateInput(e.target.value, 'birthDate')}
                          className={`w-full px-3 py-2 border rounded-md ${errors.birthDate ? 'border-red-500' : 'border-gray-300'}`}
                          placeholder="1966.05.15"
                          maxLength="10"
                        />
                        {errors.birthDate && <p className="text-red-500 text-xs mt-1">{errors.birthDate}</p>}
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium mb-1">êµì§ì› êµ¬ë¶„</label>
                        <select
                          value={formData.employeeType}
                          onChange={(e) => setFormData({...formData, employeeType: e.target.value})}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md"
                        >
                          <option value="professor">êµì› (ì •ë…„ ë§Œ65ì„¸)</option>
                          <option value="staff">ì§ì› (ì •ë…„ ë§Œ61ì„¸)</option>
                        </select>
                      </div>
                    </div>

                    <div>
                      <label className="block text-sm font-medium mb-2">ìµœê·¼ 3ê°œì›” í‰ê· ë³´ìˆ˜ì›”ì•¡*</label>
                      <div className="grid grid-cols-3 gap-2">
                        <input
                          type="number"
                          placeholder="1ê°œì›” ì „"
                          value={formData.monthlyPay1}
                          onChange={(e) => setFormData({...formData, monthlyPay1: e.target.value})}
                          className={`px-3 py-2 border rounded-md ${errors.monthlyPay ? 'border-red-500' : 'border-gray-300'}`}
                        />
                        <input
                          type="number"
                          placeholder="2ê°œì›” ì „"
                          value={formData.monthlyPay2}
                          onChange={(e) => setFormData({...formData, monthlyPay2: e.target.value})}
                          className={`px-3 py-2 border rounded-md ${errors.monthlyPay ? 'border-red-500' : 'border-gray-300'}`}
                        />
                        <input
                          type="number"
                          placeholder="3ê°œì›” ì „"
                          value={formData.monthlyPay3}
                          onChange={(e) => setFormData({...formData, monthlyPay3: e.target.value})}
                          className={`px-3 py-2 border rounded-md ${errors.monthlyPay ? 'border-red-500' : 'border-gray-300'}`}
                        />
                      </div>
                      {errors.monthlyPay && <p className="text-red-500 text-xs mt-1">{errors.monthlyPay}</p>}
                    </div>

                    <div className="border-t pt-4">
                      <label className="block text-sm font-medium mb-2">ì§€ê¸‰ëŒ€ìƒ ì œí•œì‚¬í•­ í™•ì¸</label>
                      <div className="space-y-2">
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={formData.disqualifications.underDisciplinary}
                            onChange={(e) => setFormData({
                              ...formData,
                              disqualifications: {
                                ...formData.disqualifications,
                                underDisciplinary: e.target.checked
                              }
                            })}
                            className="mr-2"
                          />
                          <span className="text-sm">ì§•ê³„ ìš”êµ¬ì¤‘ì¸ ì</span>
                        </label>
                        
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={formData.disqualifications.disciplinaryPunishment}
                            onChange={(e) => setFormData({
                              ...formData,
                              disqualifications: {
                                ...formData.disqualifications,
                                disciplinaryPunishment: e.target.checked
                              }
                            })}
                            className="mr-2"
                          />
                          <span className="text-sm">ì§•ê³„ì²˜ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì§•ê³„ì¤‘ì¸ ì</span>
                        </label>
                        
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={formData.disqualifications.criminalCase}
                            onChange={(e) => setFormData({
                              ...formData,
                              disqualifications: {
                                ...formData.disqualifications,
                                criminalCase: e.target.checked
                              }
                            })}
                            className="mr-2"
                          />
                          <span className="text-sm">í˜•ì‚¬ì‚¬ê±´ìœ¼ë¡œ ê¸°ì†Œë˜ì–´ í˜•ì´ í™•ì •ë˜ì§€ ì•„ë‹ˆí•œ ì</span>
                        </label>
                        
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={formData.disqualifications.inappropriate}
                            onChange={(e) => setFormData({
                              ...formData,
                              disqualifications: {
                                ...formData.disqualifications,
                                inappropriate: e.target.checked
                              }
                            })}
                            className="mr-2"
                          />
                          <span className="text-sm">ê¸°íƒ€ ëª…ì˜ˆí‡´ì§ì´ ë¶€ì í•©í•˜ë‹¤ê³  ì¸ì •ë˜ëŠ” ì</span>
                        </label>
                      </div>
                    </div>

                    <button
                      onClick={calculateBenefit}
                      className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 flex items-center justify-center"
                    >
                      <Calculator />
                      <span className="ml-2">ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ê³„ì‚°</span>
                    </button>
                  </div>
                </div>

                <div className="bg-white rounded-lg shadow-md p-6">
                  <h2 className="text-xl font-semibold mb-4 flex items-center">
                    <FileText />
                    <span className="ml-2">ê³„ì‚° ê²°ê³¼</span>
                  </h2>
                  
                  {calculation ? (
                    <div className="space-y-4">
                      <div className="border rounded-lg p-4">
                        <h3 className="font-semibold mb-2">ì ìš©ëŒ€ìƒ ì—¬ë¶€</h3>
                        <div className="space-y-2">
                          <div className="flex items-center">
                            {calculation.isEligible ? <CheckCircle /> : <XCircle />}
                            <span className="ml-2">
                              ê·¼ì†ê¸°ê°„: {calculation.service.display} 
                              {calculation.isEligible ? ' (20ë…„ ì´ìƒ âœ“)' : ' (20ë…„ ë¯¸ë§Œ âœ—)'}
                            </span>
                          </div>
                          
                          <div className="flex items-center">
                            {!calculation.disqualified ? <CheckCircle /> : <XCircle />}
                            <span className="ml-2">
                              ì§€ê¸‰ì œí•œì‚¬í•­: {calculation.disqualified ? 'í•´ë‹¹ë¨ âœ—' : 'í•´ë‹¹ì—†ìŒ âœ“'}
                            </span>
                          </div>
                        </div>
                      </div>

                      {calculation.isEligible && !calculation.disqualified && (
                        <>
                          <div className="border rounded-lg p-4">
                            <h3 className="font-semibold mb-2">í‡´ì§ì¼ ì •ë³´</h3>
                            <div className="grid grid-cols-2 gap-2 text-sm">
                              <div>ëª…ì˜ˆí‡´ì§ì¼:</div>
                              <div>{formData.retirementDate}</div>
                              <div>ì •ë…„í‡´ì§ì¼:</div>
                              <div>{calculation.regularRetirementDate.toLocaleDateString('ko-KR')}</div>
                              <div>ì •ë…„ì”ì—¬ê¸°ê°„:</div>
                              <div>{calculation.remaining.display}</div>
                              <div>ì •ë…„ì”ì—¬ê°œì›”ìˆ˜:</div>
                              <div className="font-semibold">{calculation.remaining.totalMonths}ê°œì›”</div>
                            </div>
                          </div>

                          <div className="border rounded-lg p-4">
                            <h3 className="font-semibold mb-2">ë³´ìˆ˜ ì •ë³´</h3>
                            <div className="text-sm">
                              <div>í‰ê· ë³´ìˆ˜ì›”ì•¡: {calculation.avgMonthlyPay.toLocaleString()}ì›</div>
                            </div>
                          </div>

                          <div className="border rounded-lg p-4">
                            <h3 className="font-semibold mb-2">ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ì‚°ì¶œë‚´ì—­</h3>
                            <div className="space-y-2">
                              {calculation.benefitDetails.map((detail, idx) => (
                                <div key={idx} className="text-sm">
                                  <div className="font-medium">{detail.period} êµ¬ê°„</div>
                                  <div className="ml-4 text-gray-600">
                                    {detail.months}ê°œì›” Ã— {calculation.avgMonthlyPay.toLocaleString()}ì› Ã— {detail.rate * 100}%
                                    = {detail.amount.toLocaleString()}ì›
                                  </div>
                                </div>
                              ))}
                            </div>
                          </div>

                          <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-4">
                            <h3 className="font-semibold text-lg mb-1">ìµœì¢… ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹</h3>
                            <div className="text-2xl font-bold text-blue-600">
                              {calculation.benefit.toLocaleString()}ì›
                            </div>
                          </div>

                          <button
                            onClick={addEmployee}
                            className="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700"
                          >
                            ì§ì› ëª…ë‹¨ì— ì¶”ê°€
                          </button>
                        </>
                      )}

                      {(!calculation.isEligible || calculation.disqualified) && (
                        <div className="bg-red-50 border-2 border-red-200 rounded-lg p-4">
                          <div className="flex items-center text-red-700">
                            <AlertCircle />
                            <span className="ml-2 font-semibold">ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹ ì§€ê¸‰ ë¶ˆê°€</span>
                          </div>
                          <div className="mt-2 text-sm text-red-600">
                            {!calculation.isEligible && 'ê·¼ì†ê¸°ê°„ì´ 20ë…„ ë¯¸ë§Œì…ë‹ˆë‹¤.'}
                            {calculation.disqualified && 'ì§€ê¸‰ì œí•œì‚¬í•­ì— í•´ë‹¹ë©ë‹ˆë‹¤.'}
                          </div>
                        </div>
                      )}
                    </div>
                  ) : (
                    <div className="text-gray-500 text-center py-8">
                      ì¢Œì¸¡ í¼ì— ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ê³„ì‚° ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”
                    </div>
                  )}
                </div>
              </div>

              {employees.length > 0 && (
                <div className="mt-6 bg-white rounded-lg shadow-md p-6">
                  <div className="flex justify-between items-center mb-4">
                    <h2 className="text-xl font-semibold">ëª…ì˜ˆí‡´ì§ ëŒ€ìƒì ëª©ë¡</h2>
                    <button
                      onClick={downloadCSV}
                      className="bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 flex items-center"
                    >
                      <Download />
                      <span className="ml-2">CSV ë‹¤ìš´ë¡œë“œ</span>
                    </button>
                  </div>
                  
                  <div className="overflow-x-auto">
                    <table className="w-full border-collapse">
                      <thead>
                        <tr className="bg-gray-100">
                          <th className="border px-2 py-2 text-left">ìˆœë²ˆ</th>
                          <th className="border px-2 py-2 text-left">ì„±ëª…</th>
                          <th className="border px-2 py-2 text-left">êµë²ˆ</th>
                          <th className="border px-2 py-2 text-left">ì†Œì†</th>
                          <th className="border px-2 py-2 text-left">êµ¬ë¶„</th>
                          <th className="border px-2 py-2 text-left">ê·¼ì†ê¸°ê°„</th>
                          <th className="border px-2 py-2 text-left">ì •ë…„ì”ì—¬</th>
                          <th className="border px-2 py-2 text-right">í‰ê· ë³´ìˆ˜</th>
                          <th className="border px-2 py-2 text-right">ëª…ì˜ˆí‡´ì§ìˆ˜ë‹¹</th>
                          <th className="border px-2 py-2 text-left">ìƒíƒœ</th>
                        </tr>
                      </thead>
                      <tbody>
                        {employees.map((emp, idx) => (
                          <tr key={emp.id} className="hover:bg-gray-50">
                            <td className="border px-2 py-2">{idx + 1}</td>
                            <td className="border px-2 py-2">{emp.name}</td>
                            <td className="border px-2 py-2">{emp.employeeId}</td>
                            <td className="border px-2 py-2">{emp.department}</td>
                            <td className="border px-2 py-2">
                              {emp.employeeType === 'professor' ? 'êµì›' : 'ì§ì›'}
                            </td>
                            <td className="border px-2 py-2">{emp.service.display}</td>
                            <td className="border px-2 py-2">{emp.remaining.totalMonths}ê°œì›”</td>
                            <td className="border px-2 py-2 text-right">{emp.avgMonthlyPay.toLocaleString()}</td>
                            <td className="border px-2 py-2 text-right font-semibold">
                              {emp.benefit.toLocaleString()}
                            </td>
                            <td className="border px-2 py-2">
                              {emp.isEligible && !emp.disqualified ? (
                                <span className="text-green-600">ì§€ê¸‰ê°€ëŠ¥</span>
                              ) : (
                                <span className="text-red-600">ì§€ê¸‰ë¶ˆê°€</span>
                              )}
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RetirementBenefitSystem />);
    </script>
</body>
</html>